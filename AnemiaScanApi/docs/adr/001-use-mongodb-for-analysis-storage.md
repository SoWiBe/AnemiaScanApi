# ADR 001: Use MongoDB for Anemia Analysis Storage

## Status
Proposed / Accepted / Deprecated

## Context
AnemiaScan API необходимо хранить:
- Результаты анализов (изображения + ML predictions)
- Историю пользователей
- Метаданные изображений

Требования:
- Быстрая запись результатов анализа
- Гибкая схема данных (могут добавляться новые поля ML модели)
- Хранение больших объемов изображений

## Decision
Используем **MongoDB** как основную БД для:
1. **Analysis Results Collection** - результаты анализов
2. **Users Collection** - данные пользователей
3. **GridFS** - хранение изображений

## Consequences

### Положительные:
- Гибкая схема для эволюции ML модели
- Встроенная поддержка GridFS для изображений
- Быстрая запись документов
- Хорошая горизонтальная масштабируемость

### Отрицательные:
- Отсутствие строгих транзакций (для этого проекта не критично)
- Необходимость следить за индексами вручную
- Дополнительная инфраструктура

## Alternatives Considered
1. **PostgreSQL** - хорошо для structured data, но неудобно для изображений
2. **SQL Server** - избыточно для проекта, дороже в hosting
3. **Cosmos DB** - дорого для MVP

## Related
- См. API Specification для структуры данных